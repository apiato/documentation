<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apiato Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apiato Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-37514928-10","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Apiato" href="/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><title data-react-helmet="true">Tests Helpers | Apiato</title><meta data-react-helmet="true" property="og:url" content="http://apiato.io//docs/next/miscellaneous/tests-helpers"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Tests Helpers | Apiato"><meta data-react-helmet="true" name="description" content="- Tests properties"><meta data-react-helmet="true" property="og:description" content="- Tests properties"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://apiato.io//docs/next/miscellaneous/tests-helpers"><link data-react-helmet="true" rel="alternate" href="http://apiato.io//docs/next/miscellaneous/tests-helpers" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://apiato.io//docs/next/miscellaneous/tests-helpers" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.bcbac3cb.css">
<link rel="preload" href="/assets/js/styles.2f28982e.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.e514489b.js" as="script">
<link rel="preload" href="/assets/js/main.264abd1d.js" as="script">
<link rel="preload" href="/assets/js/1.db016d62.js" as="script">
<link rel="preload" href="/assets/js/2.ce6aae9f.js" as="script">
<link rel="preload" href="/assets/js/3.002620f0.js" as="script">
<link rel="preload" href="/assets/js/1be78505.10402c24.js" as="script">
<link rel="preload" href="/assets/js/152.bc713a44.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.43a22717.js" as="script">
<link rel="preload" href="/assets/js/17896441.1f0b69a8.js" as="script">
<link rel="preload" href="/assets/js/95776eea.111bb47e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Apiato Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="Apiato Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Apiato</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/docs/next/">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/miscellaneous/tests-helpers">Next</a></li><li><a class="dropdown__link" href="/docs/miscellaneous/tests-helpers">9.x</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/apiato/apiato" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Apiato Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="Apiato Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Apiato</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/next/miscellaneous/tests-helpers">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/miscellaneous/tests-helpers">9.x</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/apiato/apiato" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/">Requirements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/getting-started/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/getting-started/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/getting-started/requests">Requests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/getting-started/responses">Responses</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/getting-started/software-architectural-patterns">Software Architectural Patterns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/getting-started/conventions-and-principles">Conventions and Principles</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/code-generator">Code Generator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/api-docs-generator">API Docs Generator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/authentication">Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/authorization">Authorization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/user-registration">User Registration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/social-authentication">Social Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/query-parameters">Query Parameters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/default-endpoints">Default Endpoints</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/hash-id">Hash ID</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/localization">Localization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/rate-limiting">Rate Limiting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/requests-monitor">Requests Monitor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/data-caching">Data Caching</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/pagination">Pagination</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/payments">Payments</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/system-settings">System Settings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/api-versioning">API Versioning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/validation">Validation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/search-query-parameter">Search Query Parameter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/etag">ETag</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/useful-commands">Useful Commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/admin-dashboard">Admin Dashboard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/features/profiler">Profiler</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Main Components</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/main-components/routes">Routes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/main-components/controllers">Controllers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/main-components/requests">Requests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/main-components/transporters">Transporters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/main-components/actions">Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/main-components/tasks">Tasks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/main-components/models">Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/main-components/views">Views</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/main-components/transformers">Transformers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/main-components/exceptions">Exceptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/main-components/subactions">Sub Actions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Optional Components</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/providers">Providers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/repositories">Repositories</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/criterias">Criterias</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/tests">Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/migrations">Migrations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/seeders">Seeders</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/factories">Factories</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/middlewares">Middlewares</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/configs">Configs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/commands">Commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/jobs">Jobs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/languages">Languages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/events">Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/mails">Mails</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/notifications">Notifications</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/optional-components/values">Values</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Miscellaneous</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/next/miscellaneous/tests-helpers">Tests Helpers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/miscellaneous/tasks-scheduling">Tasks Scheduling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/miscellaneous/tasks-queuing">Tasks Queuing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/miscellaneous/postman">Postman Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/miscellaneous/container-installer">Containers Installer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/miscellaneous/awesome-containers">Awesome Containers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">General</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/general/faq">Frequently Asked Questions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/general/contribution-guide">Contribution Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/general/upgrade-guide">Upgrade Guide</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/apiato/apiato/releases" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN">Change Log</a></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Apiato <strong>Next</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/docs/miscellaneous/tests-helpers">latest version</a></strong> (9.x).</div></div><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_3a4h">Tests Helpers</h1></header><div class="markdown"><ul><li><a href="#tests-properties">Tests properties</a><ul><li><a href="#endpoint">$endpoint</a></li><li><a href="#auth">$auth</a></li><li><a href="#access">$access</a></li></ul></li><li><a href="#tests-functions">Tests functions</a><ul><li><a href="#make-call">makeCall</a></li><li><a href="#get-testing-user">getTestingUser</a></li></ul></li><li><a href="#faker">Faker</a></li><li><a href="#create-live-testing-data">Create live Testing Data</a></li><li><a href="#debugging-with-PsySH">Debugging with PsySH</a></li></ul><p>Apiato provides additional helper functions, on top of the <a href="https://laravel.com/docs/master/http-tests" target="_blank" rel="noopener noreferrer">Laravel&#x27;s default Tests</a>,
to make testing your API much faster and fun.</p><p>Writing functional tests, makes implementing, debugging and modifying a feature faster.</p><p>With apiato you just prepare the data you want to send for your POST request, call the <code>call()</code> function and start
asserting the response. Everything else is set for you. There are helper functions to create and prepare a testing user
with the right authorization (roles and permissions) for each request.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tests-properties"></a>Tests properties<a class="hash-link" href="#tests-properties" title="Direct link to heading">#</a></h2><p>Some test helper functions reads your test class properties, to perform their jobs. below we will see those
properties and who uses them:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="endpoint"></a><strong>$endpoint</strong>:<a class="hash-link" href="#endpoint" title="Direct link to heading">#</a></h3><p>The <code>$endpoint = &#x27;verb@uri&#x27;;</code> property is where you define the endpoints you are trying to access when calling
<code>$this-&gt;makeCall()</code>.</p><p><strong>Example:</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">namespace App\Containers\AppSection\User\UI\API\Tests\Functional;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">use App\Containers\AppSection\User\Tests\TestCase;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">class RegisterUserTest extends TestCase</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">{</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    protected $endpoint = &#x27;post@register&#x27;;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    protected $auth = false;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    protected $access = [</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        &#x27;roles&#x27;       =&gt; &#x27;&#x27;,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        &#x27;permissions&#x27; =&gt; &#x27;&#x27;,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    ];</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    public function testRegisterNewUserWithCredentials_()</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    {</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        // prepare your post data</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        $data = [</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">            &#x27;email&#x27;    =&gt; &#x27;hello@mail.test&#x27;,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">            &#x27;name&#x27;     =&gt; &#x27;John Doe&#x27;,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">            &#x27;password&#x27; =&gt; &#x27;secret&#x27;,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        ];</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        // send the HTTP request</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        $response = $this-&gt;makeCall($data);</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        // assert response status is correct</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        $this-&gt;assertEquals(&#x27;200&#x27;, $response-&gt;getStatusCode());</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        // ... add all your assertions</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    }</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="endpoint-override-the-property-value-in-some-test-functions"></a>Override the property value in some test functions<a class="hash-link" href="#endpoint-override-the-property-value-in-some-test-functions" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">$response = $this-&gt;endpoint(&#x27;get@myEndpoint&#x27;)-&gt;makeCall();</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="auth"></a><strong>$auth</strong>:<a class="hash-link" href="#auth" title="Direct link to heading">#</a></h3><p>The <code>$auth = false;</code> property defines if the endpoint you are trying to call requires authentication or not. By default
<code>$auth</code> is equal to true, also when not defined on your test class it will be default to true.</p><p>When <code>$auth</code> is true, the <code>makeCall()</code> will create a testing user if no one already found, and it will inject his
access token in the headers, before making the call.</p><p>So only use this property when your endpoint is not protected, example for the register and login tests.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="auth-override-the-property-value-in-some-test-functions"></a>Override the property value in some test functions<a class="hash-link" href="#auth-override-the-property-value-in-some-test-functions" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">$response = $this-&gt;auth(false)-&gt;makeCall();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="access"></a><strong>$access</strong>:<a class="hash-link" href="#access" title="Direct link to heading">#</a></h3><p>The <code>$access</code> property is where you define the permissions/roles that you need to give to your testing users in that
test class. So when using <code>$user = $this-&gt;getTestingUser();</code> it will automatically take all the roles and permissions
you gave him.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    protected $access = [</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        &#x27;roles&#x27;         =&gt; &#x27;admin&#x27;, // or   [&#x27;client&#x27;, &#x27;admin&#x27;]</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        &#x27;permissions&#x27;   =&gt; &#x27;delete-users&#x27;,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    ];</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="access-override-the-property-value-in-some-test-functions"></a>Override the property value in some test functions<a class="hash-link" href="#access-override-the-property-value-in-some-test-functions" title="Direct link to heading">#</a></h4><p>Call the <code>getTestingUser</code> and pass whichever roles and permissions to him.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">$this-&gt;getTestingUser([&#x27;permissions&#x27; =&gt; &#x27;jump&#x27;, &#x27;roles&#x27; =&gt; &#x27;jumper&#x27;]);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Or you can call <code>getTestingUserWithoutAccess()</code> to get user without permissions and roles.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tests-functions"></a>Tests functions<a class="hash-link" href="#tests-functions" title="Direct link to heading">#</a></h2><p>All the test helper functions are provided by traits classes living inside <code>app/Ship/Tests/*</code> folder,and they are all
available for usage from every test class in your application.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="make-call"></a>makeCall<a class="hash-link" href="#make-call" title="Direct link to heading">#</a></h4><p><code>makeCall(array $data = [], array $headers = [])</code> is one of the most important helper functions for an API.</p><p><strong>Usage:</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">$response = $this-&gt;makeCall();</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">$response = $this-&gt;makeCall([</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    &#x27;email&#x27;    =&gt; $userDetails[&#x27;email&#x27;],</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    &#x27;password&#x27; =&gt; $userDetails[&#x27;password&#x27;],</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">]);</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">$response = $this-&gt;makeCall($data, $headers);</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">$response = $this-&gt;endpoint(&#x27;get@register&#x27;)-&gt;makeCall($data);</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">$response = $this-&gt;auth(false)-&gt;makeCall();</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">$response = $this-&gt;endpoint(&#x27;get@item/{id}&#x27;)-&gt;injectId($user-&gt;id)-&gt;makeCall();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="get-testing-user"></a>getTestingUser<a class="hash-link" href="#get-testing-user" title="Direct link to heading">#</a></h4><p><code>getTestingUser($userDetails = null, $access = null)</code> is another very important helper function:</p><p><strong>Usage:</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly php"><div tabindex="0" class="prism-code language-php codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">$user = $this-&gt;getTestingUser();</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">$user = $this-&gt;getTestingUser([</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    &#x27;email&#x27;    =&gt; &#x27;hello@mail.test&#x27;,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    &#x27;name&#x27;     =&gt; &#x27;Hello&#x27;,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    &#x27;password&#x27; =&gt; &#x27;secret&#x27;,</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">]);</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><blockquote><p><strong>NOTE:</strong> Later all the test helper functions will be documented, meanwhile to see all the available functions
check all the public functions in all the traits in this directory <code>vendor/apiato/core/Traits/TestsTraits/PhpUnit/*</code>.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="faker"></a>Faker<a class="hash-link" href="#faker" title="Direct link to heading">#</a></h2><p>Just use it from any test: <code>$this-&gt;faker-&gt;name;</code></p><p>There&#x27;s an instance of faker in every class.</p><p>Just use it: <code>$this-&gt;faker-&gt;name;</code></p><p>See the <a href="/docs/next/optional-components/tests">Tests</a> Page, for more details about the Tests components.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-live-testing-data"></a>Create live Testing Data<a class="hash-link" href="#create-live-testing-data" title="Direct link to heading">#</a></h2><p>To test your app with some live testing data (like creating items in an inventory) you can use this feature to
automatically generate those data. This is also helpful for staging when real people are testing your app with some
testing data.</p><ol><li><p>Go to <code>Seeder/SeedTestingData.php</code> seeder class, and create your live testing data.</p></li><li><p>Run this command <code>php artisan apiato:seed-test</code></p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="debugging-with-PsySH"></a>Debugging with PsySH<a class="hash-link" href="#debugging-with-PsySH" title="Direct link to heading">#</a></h2><p>For better debugging and development, you can open a runtime developer console while executing your test.</p><p>Using <a href="http://psysh.org/" target="_blank" rel="noopener noreferrer">PsySH</a> (interactive debugger and REPL &quot;read-eval-print loop&quot; for PHP). <em>The package is
required by the Laravel Tinker Package.</em></p><p>To use it set the breakpoint <code>eval(\Psy\sh());</code> anywhere you want in any Actions, Controllers, Tasks... and run your
test normally.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/apiato/documentation/tree/master/docs/miscellaneous/tests-helpers.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-04-15T13:43:35.000Z" class="lastUpdatedDate_1WI_">4/15/2021</time> by <strong>Mohammad Alavi</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/next/optional-components/values"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Values</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/next/miscellaneous/tasks-scheduling"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tasks Scheduling Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tests-properties" class="table-of-contents__link">Tests properties</a><ul><li><a href="#endpoint" class="table-of-contents__link"><strong>$endpoint</strong>:</a></li><li><a href="#auth" class="table-of-contents__link"><strong>$auth</strong>:</a></li><li><a href="#access" class="table-of-contents__link"><strong>$access</strong>:</a></li></ul></li><li><a href="#tests-functions" class="table-of-contents__link">Tests functions</a></li><li><a href="#faker" class="table-of-contents__link">Faker</a></li><li><a href="#create-live-testing-data" class="table-of-contents__link">Create live Testing Data</a></li><li><a href="#debugging-with-PsySH" class="table-of-contents__link">Debugging with PsySH</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs">Getting Started</a></li><li class="footer__item"><a href="https://github.com/Mahmoudz/Porto#porto-software-architectural-pattern" target="_blank" rel="noopener noreferrer" class="footer__link-item">Porto Architecture</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/ryPcV4KM5k" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord Server</a></li><li class="footer__item"><a href="https://github.com/apiato/apiato/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Issues</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Contributors</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/general/contribution-guide">Contribution Guide</a></li><li class="footer__item"><a href="https://github.com/apiato/apiato/blob/9.0/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code of Conduct</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Sponsors</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/apiato/apiato#sponsors" target="_blank" rel="noopener noreferrer" class="footer__link-item">Our Sponsors</a></li><li class="footer__item"><a href="https://opencollective.com/apiato" target="_blank" rel="noopener noreferrer" class="footer__link-item">Become a Sponsor</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2016 - 2021</div></div></div></footer></div>
<script src="/assets/js/styles.2f28982e.js"></script>
<script src="/assets/js/runtime~main.e514489b.js"></script>
<script src="/assets/js/main.264abd1d.js"></script>
<script src="/assets/js/1.db016d62.js"></script>
<script src="/assets/js/2.ce6aae9f.js"></script>
<script src="/assets/js/3.002620f0.js"></script>
<script src="/assets/js/1be78505.10402c24.js"></script>
<script src="/assets/js/152.bc713a44.js"></script>
<script src="/assets/js/935f2afb.43a22717.js"></script>
<script src="/assets/js/17896441.1f0b69a8.js"></script>
<script src="/assets/js/95776eea.111bb47e.js"></script>
</body>
</html>