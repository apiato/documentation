"use strict";(self.webpackChunkapiato_documentation=self.webpackChunkapiato_documentation||[]).push([[27903],{28453:(e,i,n)=>{n.d(i,{R:()=>s,x:()=>o});var t=n(96540);const r={},a=t.createContext(r);function s(e){const i=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(a.Provider,{value:i},e.children)}},92341:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"security/email-varification","title":"Email Verification","description":"Apiato provides an email verification feature out of the box","source":"@site/versioned_docs/version-13.x/security/email-varification.md","sourceDirName":"security","slug":"/security/email-varification","permalink":"/docs/security/email-varification","draft":false,"unlisted":false,"editUrl":"https://github.com/apiato/documentation/tree/master/versioned_docs/version-13.x/security/email-varification.md","tags":[],"version":"13.x","lastUpdatedBy":"Mohammad Alavi","lastUpdatedAt":1746631000000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Email Verification"},"sidebar":"tutorialSidebar","previous":{"title":"Authorization","permalink":"/docs/security/authorization"},"next":{"title":"Password Reset","permalink":"/docs/security/password-reset"}}');var r=n(74848),a=n(28453);const s={sidebar_position:5,title:"Email Verification"},o=void 0,l={},c=[{value:"Model Preparation",id:"model-preparation",level:2},{value:"Routing",id:"routing",level:2},{value:"The Email Verification Notice",id:"the-email-verification-notice",level:3},{value:"The Email Verification Handler",id:"the-email-verification-handler",level:3},{value:"Resending The Verification Email",id:"resending-the-verification-email",level:3},{value:"Protecting Routes",id:"protecting-routes",level:3},{value:"Process Flow",id:"process-flow",level:2},{value:"Email Verification URL",id:"email-verification-url",level:2}];function d(e){const i={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.p,{children:["Apiato provides an email verification feature out of the box\nusing the ",(0,r.jsx)(i.a,{href:"https://laravel.com/docs/verification",children:"Laravel's built-in email verification"})," functionality."]}),"\n",(0,r.jsx)(i.h2,{id:"model-preparation",children:"Model Preparation"}),"\n",(0,r.jsxs)(i.p,{children:["All you need to do to enable email verification is\nto verify that your ",(0,r.jsx)(i.code,{children:"User"})," model implements the ",(0,r.jsx)(i.code,{children:"Illuminate\\Contracts\\Auth\\MustVerifyEmail"})," contract."]}),"\n",(0,r.jsx)(i.h2,{id:"routing",children:"Routing"}),"\n",(0,r.jsx)(i.h3,{id:"the-email-verification-notice",children:"The Email Verification Notice"}),"\n",(0,r.jsx)(i.p,{children:"If you've enabled email verification,\nthe API will automatically send an email verification link to the user's provided email address upon user creation."}),"\n",(0,r.jsx)(i.h3,{id:"the-email-verification-handler",children:"The Email Verification Handler"}),"\n",(0,r.jsx)(i.p,{children:"There are two main elements to handle the email verification process:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Frontend URL","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Define a route in your frontend app to handle the email verification link."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["API Configuration","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Configure your frontend app's email verification URL by either creating a new ",(0,r.jsx)(i.a,{href:"/docs/the-basics/apps",children:"App"}),"\nor using the existing ",(0,r.jsx)(i.code,{children:"App\\Ship\\Apps\\Web"})," app."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:["Next,\nread the ",(0,r.jsx)(i.a,{href:"#process-flow",children:"Process Flow"})," section to understand how this ties into the overall email verification process."]}),"\n",(0,r.jsx)(i.h3,{id:"resending-the-verification-email",children:"Resending The Verification Email"}),"\n",(0,r.jsxs)(i.p,{children:["To resend the email verification link, use the ",(0,r.jsx)(i.code,{children:"/email/verification-notification"})," endpoint."]}),"\n",(0,r.jsx)(i.h3,{id:"protecting-routes",children:"Protecting Routes"}),"\n",(0,r.jsxs)(i.p,{children:["Apply the ",(0,r.jsx)(i.code,{children:"verified"})," middleware to restrict access to certain routes for confirmed users.\nWhen email verification is enabled, unverified users trying to access protected endpoints will trigger an exception,\nprompting them to confirm their email address."]}),"\n",(0,r.jsxs)(i.p,{children:["Please note that if email verification is disabled,\nthe ",(0,r.jsx)(i.code,{children:"verified"})," middleware won't protect routes against unconfirmed users and will have no effect."]}),"\n",(0,r.jsx)(i.h2,{id:"process-flow",children:"Process Flow"}),"\n",(0,r.jsxs)(i.p,{children:["Let's assume you have a frontend app with a URL like ",(0,r.jsx)(i.code,{children:"https://myapp.com/verify-email"}),".\nThe email verification process flow is as follows:"]}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"The user registers or updates their email address."}),"\n",(0,r.jsxs)(i.li,{children:["The API sends an email verification link to the user's email address. It includes a link like this: ",(0,r.jsx)(i.code,{children:"https://myapp.com/verify-email?verification_url=https://api.myapi.com/v1/email/verify/123/d2aG21sCc112k3"}),"."]}),"\n",(0,r.jsx)(i.li,{children:"The user clicks the link in the email."}),"\n",(0,r.jsx)(i.li,{children:"The link redirects the user to the specified (Frontend) URL in the email."}),"\n",(0,r.jsxs)(i.li,{children:["The URL contains a ",(0,r.jsx)(i.code,{children:"verification_url"})," query string parameter."]}),"\n",(0,r.jsxs)(i.li,{children:["The frontend app makes a ",(0,r.jsx)(i.code,{children:"POST"})," request to the ",(0,r.jsx)(i.code,{children:"verification_url"})," to verify the user's email."]}),"\n",(0,r.jsxs)(i.li,{children:["The API verifies the user's email and returns a ",(0,r.jsx)(i.code,{children:"200 OK"})," response."]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"email-verification-url",children:"Email Verification URL"}),"\n",(0,r.jsxs)(i.p,{children:["You may instruct the API to use a different URL for email verification by using the Apiato ",(0,r.jsx)(i.a,{href:"/docs/the-basics/apps",children:"Apps"})," feature."]})]})}function h(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);