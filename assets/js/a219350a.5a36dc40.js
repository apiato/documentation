"use strict";(self.webpackChunkapiato_documentation=self.webpackChunkapiato_documentation||[]).push([[55405],{28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>s});var i=t(96540);const r={},o=i.createContext(r);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(o.Provider,{value:n},e.children)}},76596:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"components/optional-components/repository/criteria","title":"Criteria","description":"To prevent overlap with the L5 Repository documentation, this page","source":"@site/docs/components/optional-components/repository/criteria.mdx","sourceDirName":"components/optional-components/repository","slug":"/components/optional-components/repository/criteria","permalink":"/docs/next/components/optional-components/repository/criteria","draft":false,"unlisted":false,"editUrl":"https://github.com/apiato/documentation/tree/master/docs/components/optional-components/repository/criteria.mdx","tags":[{"inline":true,"label":"component","permalink":"/docs/next/tags/component"},{"inline":true,"label":"optional-component","permalink":"/docs/next/tags/optional-component"},{"inline":true,"label":"criteria","permalink":"/docs/next/tags/criteria"},{"inline":true,"label":"repository","permalink":"/docs/next/tags/repository"},{"inline":true,"label":"action","permalink":"/docs/next/tags/action"},{"inline":true,"label":"task","permalink":"/docs/next/tags/task"}],"version":"current","lastUpdatedBy":"Mohammad Alavi","lastUpdatedAt":1746631000000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Criteria","tags":["component","optional-component","criteria","repository","action","task"]},"sidebar":"tutorialSidebar","previous":{"title":"Repositories","permalink":"/docs/next/components/optional-components/repository/repositories"},"next":{"title":"Seeders","permalink":"/docs/next/components/optional-components/seeders"}}');var r=t(74848),o=t(28453);const a={sidebar_position:2,title:"Criteria",tags:["component","optional-component","criteria","repository","action","task"]},s=void 0,l={},c=[{value:"Rules",id:"rules",level:2},{value:"Folder Structure",id:"folder-structure",level:2},{value:"Code Example",id:"code-example",level:2},{value:"Applying Criteria",id:"applying-criteria",level:3}];function p(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["To prevent overlap with the L5 Repository documentation, this page\nexclusively delves into Apiato distinct features and configurations,\noffering only a limited set of examples.\nTo learn more about Criteria and the L5 Repository package,\nplease refer to its ",(0,r.jsx)(n.a,{href:"https://github.com/andersao/l5-repository",children:"documentation"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Criteria are specialized classes designed to encapsulate\nand apply query conditions when fetching data from a database using a ",(0,r.jsx)(n.a,{href:"/docs/next/components/optional-components/repository/repositories",children:"Repository"}),".\nUnlike adding query conditions directly to a Repository or as a scope within a Model,\nCriteria offer distinct advantages."]}),"\n",(0,r.jsx)(n.p,{children:"With Criteria, you can define query conditions in a reusable and shareable way.\nThis means\nthat a single query condition can be defined once and then\nused across multiple Models and Repositories in your application.\nThis approach offers the flexibility to create query conditions once\nand apply them consistently anywhere in your application,\nenhancing code reusability and maintainability."}),"\n",(0,r.jsx)(n.h2,{id:"rules",children:"Rules"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["All container-specific Criteria MUST be placed in the ",(0,r.jsx)(n.code,{children:"app/Containers/{Section}/{Container}/Data/Criterias"})," directory."]}),"\n",(0,r.jsxs)(n.li,{children:["All general Criteria MUST be placed in the ",(0,r.jsx)(n.code,{children:"app/Ship/Criteria"})," directory."]}),"\n",(0,r.jsxs)(n.li,{children:["All Criteria MUST extend the ",(0,r.jsx)(n.code,{children:"App\\Ship\\Parents\\Criteria\\Criteria"})," class.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The parent extension SHOULD be aliased as ",(0,r.jsx)(n.code,{children:"ParentCriteria"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Every Criteria MUST have an ",(0,r.jsx)(n.code,{children:"apply"})," method."]}),"\n",(0,r.jsx)(n.li,{children:"A Criteria MUST not contain any extra code. If it needs data, the data MUST be passed to it."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"folder-structure",children:"Folder Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-markdown",children:"app\n\u251c\u2500\u2500 Containers\n\u2502   \u2514\u2500\u2500 Section\n\u2502       \u2514\u2500\u2500 Container\n\u2502           \u2514\u2500\u2500 Data\n\u2502               \u2514\u2500\u2500 Criteria\n\u2502                   \u251c\u2500\u2500 ColourRedCriteria.php\n\u2502                   \u251c\u2500\u2500 RaceCarsCriteria.php\n\u2502                   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 Ship\n    \u2514\u2500\u2500 Criteria\n        \u251c\u2500\u2500 CreatedTodayCriteria.php\n        \u251c\u2500\u2500 NotNullCriteria.php\n        \u2514\u2500\u2500 ...\n"})}),"\n",(0,r.jsx)(n.h2,{id:"code-example",children:"Code Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use App\\Ship\\Parents\\Criteria\\Criteria as ParentCriteria;\nuse Prettus\\Repository\\Contracts\\RepositoryInterface as PrettusRepositoryInterface;\n\nclass IsNullCriteria extends ParentCriteria\n{\n    public function __construct(\n        private readonly string $field\n    ) {\n    }\n\n    public function apply($model, PrettusRepositoryInterface $repository)\n    {\n        return $model->whereNull($this->field);\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"applying-criteria",children:"Applying Criteria"}),"\n",(0,r.jsxs)(n.p,{children:["A Criteria can be applied to a Repository by using the ",(0,r.jsx)(n.code,{children:"pushCriteria"})," method.\nThe ",(0,r.jsx)(n.code,{children:"pushCriteria"})," method accepts an instance of a Criteria class or a string with the Criteria class name.\nYou can also apply multiple Criteria to a Repository by using the ",(0,r.jsx)(n.code,{children:"pushCriteria"})," method multiple times."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"public function run()\n{\n    $repository = app(UserRepository::class);\n\n    $repository->pushCriteria(new IsNullCriteria('email'));\n    $repository->pushCriteria(OrderByNameCriteria::class);\n\n    return $repository->paginate();\n}\n"})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}}}]);