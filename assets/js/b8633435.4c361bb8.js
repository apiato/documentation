"use strict";(self.webpackChunkapiato_documentation=self.webpackChunkapiato_documentation||[]).push([[63377],{54606:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var r=i(74848),s=i(28453);const o={sidebar_position:2,title:"Upgrade Guide"},d=void 0,a={id:"prologue/upgrade-guide",title:"Upgrade Guide",description:"Apiato 13.x is a major release that introduces breaking changes and new features.",source:"@site/docs/prologue/upgrade-guide.mdx",sourceDirName:"prologue",slug:"/prologue/upgrade-guide",permalink:"/docs/next/prologue/upgrade-guide",draft:!1,unlisted:!1,editUrl:"https://github.com/apiato/documentation/tree/master/docs/prologue/upgrade-guide.mdx",tags:[],version:"current",lastUpdatedBy:"Mohammad Alavi",lastUpdatedAt:1746963283e3,sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Upgrade Guide"},sidebar:"tutorialSidebar",previous:{title:"Release Notes",permalink:"/docs/next/prologue/release-notes"},next:{title:"Contribution Guide",permalink:"/docs/next/prologue/contribution-guide"}},t={},c=[{value:"Upgrade Path",id:"upgrade-path",level:2},{value:"Upgrading Laravel to 11.0 from 10.x",id:"upgrade-laravel-11",level:4},{value:"Upgrading Laravel to 12.0 from 11.x",id:"upgrade-laravel-12",level:4},{value:"Upgrading Apiato to 13.0 from 12.x and Core to 13.0 from 8.x",id:"upgrade-apiato-13",level:4},{value:"Upgrade Utilities",id:"upgrade-utilities",level:2},{value:"Legacy Bridge",id:"legacy-bridge",level:3},{value:"Rector Rules",id:"rector-rules",level:3},{value:"Updating Dependencies",id:"updating-dependencies",level:2},{value:"PHP 8.2.0 Required",id:"php-820-required",level:3},{value:"Composer Dependencies",id:"composer-dependencies",level:3},{value:"Remove First-Party Apiato Packages",id:"remove-first-party-apiato-packages",level:4},{value:"Consolidate Dependencies",id:"consolidate-dependencies",level:4},{value:"Update Dependency Versions",id:"update-dependency-versions",level:4},{value:"Remove Unnecessary Dependencies",id:"remove-unnecessary-dependencies",level:4},{value:"Review Package Upgrade Guides",id:"review-package-upgrade-guides",level:4},{value:"Abstract Namespace",id:"abstract-namespace",level:2},{value:"App Configuration",id:"app-configuration",level:2},{value:"Testing",id:"testing",level:2},{value:"<code>TestCase</code> Class",id:"testcase-class",level:4},{value:"<code>LazilyRefreshDatabase</code> Trait",id:"lazilyrefreshdatabase-trait",level:4},{value:"Removed Methods",id:"removed-methods",level:4},{value:"Service Providers",id:"service-providers",level:2},{value:"Automatic Registration",id:"automatic-registration",level:3},{value:"Specific Provider Changes",id:"specific-provider-changes",level:3},{value:"AuthServiceProvider",id:"authserviceprovider",level:4},{value:"MiddlewareServiceProvider",id:"middlewareserviceprovider",level:4},{value:"BroadcastServiceProvider",id:"broadcastserviceprovider",level:4},{value:"Parent Method Calls",id:"parent-method-calls",level:3},{value:"Removed Properties",id:"removed-properties",level:3},{value:"Middleware",id:"middleware",level:2},{value:"Resource Key",id:"resource-key",level:2},{value:"<code>HasResourceKey</code> Interface",id:"has-resource-key-interface",level:4},{value:"<code>HasResourceKey</code> Trait",id:"has-resource-key-trait",level:4},{value:"ModelTrait",id:"modeltrait",level:2},{value:"Value Objects",id:"value-objects",level:2},{value:"Models",id:"models",level:2},{value:"Laravel Passport",id:"laravel-passport",level:2},{value:"Migration Adjustments",id:"migration-adjustments",level:3},{value:"Password Grant",id:"password-grant",level:3},{value:"Deferrable Provider",id:"deferrable-provider",level:3},{value:"Carbon 3",id:"carbon-3",level:2},{value:"Request",id:"request",level:2},{value:"Removed Methods",id:"removed-methods-1",level:3},{value:"Authorization",id:"authorization",level:3},{value:"Example Conversion:",id:"example-conversion",level:4},{value:"URL Parameter Validation",id:"url-parameter-validation",level:3},{value:"Hashed ID Decoding",id:"hashed-id-decoding",level:3},{value:"Input Sanitization",id:"input-sanitization",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Removed Methods on Exceptions",id:"removed-methods-on-exceptions",level:3},{value:"ExceptionsHandler",id:"exceptionshandler",level:3},{value:"HTTP vs. Non-HTTP Exceptions",id:"http-vs-non-http-exceptions",level:3},{value:"Exception Instantiation",id:"exception-instantiation",level:3},{value:"Removed Core Exceptions",id:"removed-core-exceptions",level:3},{value:"Response",id:"response",level:2},{value:"Transformation",id:"transformation",level:3},{value:"Filtering",id:"filtering",level:3},{value:"Repository",id:"repository",level:2},{value:"<code>boot</code> Method",id:"boot-method",level:4},{value:"<code>getById</code> Method",id:"getbyid-method",level:4},{value:"<code>delete</code> Method",id:"delete-method",level:4},{value:"<code>create</code> Method",id:"create-method",level:4},{value:"<code>update</code> Method",id:"update-method",level:4},{value:"<code>find</code> Method",id:"find-method",level:4},{value:"Criteria",id:"criteria",level:3},{value:"Hash IDs",id:"hash-ids",level:2},{value:"Jobs",id:"jobs",level:2},{value:"Validation",id:"validation",level:2},{value:"Database Seeding",id:"database-seeding",level:2},{value:"Commands",id:"commands",level:2},{value:"Notifications",id:"notifications",level:2},{value:"API URL Configuration",id:"api-url-configuration",level:2},{value:"Path Prefix",id:"path-prefix",level:3},{value:"Version Prefix",id:"version-prefix",level:3},{value:"Uncamelize Function",id:"uncamelize-function",level:2},{value:"Miscellaneous",id:"miscellaneous",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Apiato 13.x is a major release that introduces breaking changes and new features.\nThis release is compatible with Laravel 11.x and 12.x."}),"\n",(0,r.jsx)(n.h2,{id:"upgrade-path",children:"Upgrade Path"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#upgrade-laravel-11",children:"Upgrade"})," to Laravel 11.x from 10.x."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#upgrade-apiato-13",children:"Upgrade"})," to Apiato and Core 13.0 from 12.x and 8.x respectively."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#upgrade-laravel-12",children:"Upgrade"})," to Laravel 12.x from 11.x."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"upgrade-laravel-11",children:"Upgrading Laravel to 11.0 from 10.x"}),"\n",(0,r.jsxs)(n.p,{children:["Follow the official ",(0,r.jsx)(n.a,{href:"https://laravel.com/docs/11.x/upgrade",children:"Laravel 11 upgrade guide"})," to update your codebase accordingly."]}),"\n",(0,r.jsx)(n.h4,{id:"upgrade-laravel-12",children:"Upgrading Laravel to 12.0 from 11.x"}),"\n",(0,r.jsxs)(n.p,{children:["Follow the official ",(0,r.jsx)(n.a,{href:"https://laravel.com/docs/12.x/upgrade",children:"Laravel 12 upgrade guide"}),"\nto update your codebase accordingly."]}),"\n",(0,r.jsxs)(n.p,{children:["Update the ",(0,r.jsx)(n.code,{children:"apiato/core"})," package to version ",(0,r.jsx)(n.a,{href:"https://github.com/apiato/core/releases/tag/v13.1.0",children:"13.1"}),",\nas this is the only compatible version with Laravel 12.x."]}),"\n",(0,r.jsxs)(n.p,{children:["The most significant change involves the ",(0,r.jsx)(n.code,{children:"laravel/passport"})," package.\nFollow the official ",(0,r.jsx)(n.a,{href:"https://github.com/laravel/passport/blob/13.x/UPGRADE.md#upgrading-to-130-from-12x",children:"Laravel Passport 13 upgrade guide"}),"\nto update your codebase accordingly.\nYou can review the ",(0,r.jsx)(n.a,{href:"https://github.com/apiato/apiato/pull/781/files",children:"Laravel 12.x support"})," pull request\nto help you with the upgrade process and identify any other modifications required to adapt your codebase."]}),"\n",(0,r.jsx)(n.h4,{id:"upgrade-apiato-13",children:"Upgrading Apiato to 13.0 from 12.x and Core to 13.0 from 8.x"}),"\n",(0,r.jsx)(n.p,{children:"This guide will walk you through upgrading Apiato and your project to the latest versions."}),"\n",(0,r.jsx)(n.h2,{id:"upgrade-utilities",children:"Upgrade Utilities"}),"\n",(0,r.jsx)(n.h3,{id:"legacy-bridge",children:"Legacy Bridge"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.a,{href:"https://github.com/apiato/legacy-bridge",children:"Legacy Bridge"})," is a set of utilities\nto help you gradually upgrade your codebase."]}),"\n",(0,r.jsx)(n.h3,{id:"rector-rules",children:"Rector Rules"}),"\n",(0,r.jsxs)(n.p,{children:["Apiato provides a set of ",(0,r.jsx)(n.a,{href:"https://github.com/mohammad-alavi/apiato-rector",children:"custom Rector rules"}),"\nto help automate some aspects of the upgrade process."]}),"\n",(0,r.jsx)(n.admonition,{title:"Rector",type:"info",children:(0,r.jsxs)(n.p,{children:["Learn more about ",(0,r.jsx)(n.a,{href:"https://getrector.com",children:"Rector"})]})}),"\n",(0,r.jsx)(n.h2,{id:"updating-dependencies",children:"Updating Dependencies"}),"\n",(0,r.jsx)(n.h3,{id:"php-820-required",children:"PHP 8.2.0 Required"}),"\n",(0,r.jsx)(n.p,{children:"PHP 8.2.0 or greater is now required."}),"\n",(0,r.jsx)(n.h3,{id:"composer-dependencies",children:"Composer Dependencies"}),"\n",(0,r.jsx)(n.p,{children:"Perform these steps to update your dependencies."}),"\n",(0,r.jsx)(n.h4,{id:"remove-first-party-apiato-packages",children:"Remove First-Party Apiato Packages"}),"\n",(0,r.jsxs)(n.p,{children:["Delete all Apiato first-party packages in ",(0,r.jsx)(n.code,{children:"app/Containers/Vendor"})," to avoid dependency conflicts.\nThese packages will be reinstalled after running ",(0,r.jsx)(n.code,{children:"composer update"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"consolidate-dependencies",children:"Consolidate Dependencies"}),"\n",(0,r.jsxs)(n.p,{children:["If the following dependencies are defined in the Ship or any Container ",(0,r.jsx)(n.code,{children:"composer.json"})," file,\nmove them to your application\u2019s root ",(0,r.jsx)(n.code,{children:"composer.json"})," file:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"apiato/core"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"laravel/passport"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"spatie/laravel-permission"})}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"update-dependency-versions",children:"Update Dependency Versions"}),"\n",(0,r.jsxs)(n.p,{children:["Update the following dependencies in your ",(0,r.jsx)(n.code,{children:"composer.json"})," files:"]}),"\n",(0,r.jsx)(n.p,{children:"require"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"apiato/core"})," to ",(0,r.jsx)(n.code,{children:"^13.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"laravel/passport"})," to ",(0,r.jsx)(n.code,{children:"^12.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"spatie/laravel-permission"})," to ",(0,r.jsx)(n.code,{children:"^6.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"apiato/documentation-generator-container"})," to ",(0,r.jsx)(n.code,{children:"^4.0"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"require-dev"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"nunomaduro/collision"})," to ",(0,r.jsx)(n.code,{children:"^8.1"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"phpunit/phpunit"})," to ",(0,r.jsx)(n.code,{children:"^11.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"barryvdh/laravel-ide-helper"})," to ",(0,r.jsx)(n.code,{children:"^3.0"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"vimeo/psalm"})," to ",(0,r.jsx)(n.code,{children:"^6.0"}),"\nDon\u2019t forget to also update ",(0,r.jsx)(n.code,{children:"psalm"})," plugins if you have them:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'"psalm/plugin-laravel": "^3.0",\n"psalm/plugin-mockery": "^1.2",\n"psalm/plugin-phpunit": "^0.19.2",\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"remove-unnecessary-dependencies",children:"Remove Unnecessary Dependencies"}),"\n",(0,r.jsxs)(n.p,{children:["Remove these dependencies from your root ",(0,r.jsx)(n.code,{children:"composer.json"})," file:"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"spatie/laravel-ignition"}),"  (Laravel now provides its own error page)"]}),"\n",(0,r.jsxs)(n.p,{children:["Following dependencies are also no longer required as they are now either managed by ",(0,r.jsx)(n.code,{children:"apiato/core"})," or Laravel Framework itself."]}),"\n",(0,r.jsx)(n.p,{children:"PHP extensions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ext-curl"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ext-gettext"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ext-mbstring"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ext-openssl"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ext-pdo"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ext-sodium"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ext-tokenizer"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Packages"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"guzzlehttp/guzzle"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"laravel/framework"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"laravel/tinker"})}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"review-package-upgrade-guides",children:"Review Package Upgrade Guides"}),"\n",(0,r.jsx)(n.p,{children:"Check the upgrade guides for each dependency to be aware of additional breaking changes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/sebastianbergmann/phpunit/blob/11.0.0/ChangeLog-11.0.md#1100---2024-02-02",children:"phpunit/phpunit"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://spatie.be/docs/laravel-permission/v6/upgrading",children:"spatie/laravel-permission"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Remove the existing ",(0,r.jsx)(n.code,{children:"vendor"})," directory for a clean start:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"rm -rf vendor\n"})}),"\n",(0,r.jsx)(n.p,{children:"Pull in the latest dependencies:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"composer update\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Because of the merging behavior of ",(0,r.jsx)(n.code,{children:"wikimedia/composer-merge-plugin"}),",\nrun the command a second time to ensure that all dependencies are correctly installed:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"composer update\n"})}),"\n",(0,r.jsx)(n.h2,{id:"abstract-namespace",children:"Abstract Namespace"}),"\n",(0,r.jsxs)(n.p,{children:["The Core abstract classes have been relocated from ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Abstracts"})," to ",(0,r.jsx)(n.code,{children:"Apiato\\Core"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Update your codebase to use this new namespace."}),"\n",(0,r.jsx)(n.h2,{id:"app-configuration",children:"App Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Laravel 11 and Apiato 13 configurations are simplified, and both now provide a fluid API for configuration."}),"\n",(0,r.jsxs)(n.p,{children:["Replace the contents of ",(0,r.jsx)(n.code,{children:"bootstrap/app.php"})," file with the following as a base, and customize it as needed:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"<?php\n\nuse Apiato\\Foundation\\Apiato;\nuse Apiato\\Http\\Middleware\\ProcessETag;\nuse Apiato\\Http\\Middleware\\ValidateJsonContent;\nuse Illuminate\\Foundation\\Application;\nuse Illuminate\\Foundation\\Configuration\\Exceptions;\nuse Illuminate\\Foundation\\Configuration\\Middleware;\n\n$basePath = dirname(__DIR__);\n$apiato = Apiato::configure(basePath: $basePath)->create();\n\nreturn Application::configure(basePath: $basePath)\n    ->withProviders($apiato->providers())\n    ->withEvents($apiato->events())\n    ->withRouting(\n        web: $apiato->webRoutes(),\n        channels: __DIR__ . '/../app/Ship/Broadcasts/channels.php',\n        health: '/up',\n        then: static fn () => $apiato->registerApiRoutes(),\n    )\n    ->withMiddleware(function (Middleware $middleware) {\n        // Previously applied via app/Ship/Kernels/HttpKernel class\n        $middleware->api(append: [\n            ValidateJsonContent::class,\n            ProcessETag::class,\n        ]);\n\n        // Uncomment and adjust these if using web routes:\n        // $middleware->redirectUsersTo(fn ($request): string => action(HomePageController::class));\n        // $middleware->redirectGuestsTo(fn ($request): string => action([LoginController::class, 'showForm']));\n    })\n    ->withCommands($apiato->commands())\n    ->withExceptions(static function (Exceptions $exceptions) {})\n    ->create();\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Move any custom middleware registrations from ",(0,r.jsx)(n.code,{children:"app/Ship/Kernels/HttpKernel.php"})," to the ",(0,r.jsx)(n.code,{children:"bootstrap/app.php"})," file."]}),"\n",(0,r.jsxs)(n.p,{children:["Move any custom configurations from ",(0,r.jsx)(n.code,{children:"app/Ship/Kernels/ConsoleKernel.php"})," and ",(0,r.jsx)(n.code,{children:"App\\Ship\\Kernels\\HttpKernel"})," to the ",(0,r.jsx)(n.code,{children:"bootstrap/app.php"})," file."]}),"\n",(0,r.jsxs)(n.p,{children:["Remove ",(0,r.jsx)(n.code,{children:"App\\Ship\\Kernels\\HttpKernel"})," and ",(0,r.jsx)(n.code,{children:"App\\Ship\\Kernels\\ConsoleKernel"})," classes."]}),"\n",(0,r.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,r.jsxs)(n.h4,{id:"testcase-class",children:[(0,r.jsx)(n.code,{children:"TestCase"})," Class"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Abstracts\\Tests\\PhpUnit\\TestCase"})," class namespace has changed to ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Testing\\TestCase"}),"."]}),"\n",(0,r.jsxs)(n.h4,{id:"lazilyrefreshdatabase-trait",children:[(0,r.jsx)(n.code,{children:"LazilyRefreshDatabase"})," Trait"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Illuminate\\Foundation\\Testing\\LazilyRefreshDatabase"})," trait has been removed from the Core TestCase."]}),"\n",(0,r.jsxs)(n.p,{children:["Add ",(0,r.jsx)(n.code,{children:"LazilyRefreshDatabase"})," to your ",(0,r.jsx)(n.code,{children:"App\\Ship\\Parents\\Tests\\TestCase"})," if you want this functionality."]}),"\n",(0,r.jsx)(n.h4,{id:"removed-methods",children:"Removed Methods"}),"\n",(0,r.jsx)(n.p,{children:"The testing utilities provided by Apiato have been simplified to embrace Laravel\u2019s testing approach."}),"\n",(0,r.jsx)(n.p,{children:"The following methods are no longer available:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"getTestingUser"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"getTestingUserWithoutAccess"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"makeCall"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"injectId"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"endpoint"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"getAuth"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"setResponseObjectAndContent"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"getResponseContentArray"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"getResponseContent"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"setResponseContent"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"getResponseContentObject"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"auth"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"url"})}),"\n",(0,r.jsx)(n.li,{children:"etc..."}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["For a gradual upgrade in large codebases, refer to the ",(0,r.jsx)(n.a,{href:"#upgrade-utilities",children:"Apiato Legacy Bridge"}),"."]})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"#has-resource-key-trait",children:"HasResourceKeyTrait"})," has been removed from the Core Value Object (",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Values\\Value"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:["If your Value Objects are relying on the ",(0,r.jsx)(n.code,{children:"HasResourceKeyTrait"}),",\nyou need to refactor them to use the new ",(0,r.jsx)(n.a,{href:"#has-resource-key-trait",children:"HasResourceKey"})," trait\nand implement the ",(0,r.jsx)(n.a,{href:"#has-resource-key-interface",children:"ResourceKeyAware"})," interface."]}),"\n",(0,r.jsx)(n.h2,{id:"service-providers",children:"Service Providers"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Abstracts\\Providers\\MainServiceProvider"})," class has been removed."]}),"\n",(0,r.jsxs)(n.p,{children:["Existing service providers extending this class should be refactored\nto extend ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Providers\\ServiceProvider"})," class instead.\ne.g, ",(0,r.jsx)(n.code,{children:"App\\Ship\\Parents\\Providers\\ServiceProvider"})," class."]}),"\n",(0,r.jsx)(n.h3,{id:"automatic-registration",children:"Automatic Registration"}),"\n",(0,r.jsxs)(n.p,{children:["All providers within the ",(0,r.jsx)(n.code,{children:"Providers"})," directories of Containers and Ship are now automatically registered.\nThere is no longer a requirement to have a specifically named ",(0,r.jsx)(n.code,{children:"MainServiceProvider"})," service provider per container."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Any parent providers under ",(0,r.jsx)(n.code,{children:"app/Ship/Parents/Providers"})," will ",(0,r.jsx)(n.strong,{children:"NOT"})," be registered automatically.\nIf you need to do something in a provider\u2019s ",(0,r.jsx)(n.code,{children:"register"})," or ",(0,r.jsx)(n.code,{children:"boot"})," methods,\nextend those providers in a Container or Ship ",(0,r.jsx)(n.code,{children:"Providers"})," directory."]})}),"\n",(0,r.jsx)(n.h3,{id:"specific-provider-changes",children:"Specific Provider Changes"}),"\n",(0,r.jsx)(n.h4,{id:"authserviceprovider",children:"AuthServiceProvider"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Abstracts\\Providers\\AuthServiceProvider"})," class has been removed."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If you were manually registering policies outside Laravel\u2019s policy discovery, follow the ",(0,r.jsx)(n.a,{href:"https://laravel.com/docs/11.x/authorization#manually-registering-policies",children:"Laravel manual registration guide"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Refactor all service providers extending the following service providers to extend ",(0,r.jsx)(n.code,{children:"App\\Ship\\Parents\\Providers\\ServiceProvider"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"App\\Ship\\Parents\\Providers\\AuthServiceProvider"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Abstracts\\Providers\\AuthServiceProvider"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Illuminate\\Foundation\\Support\\Providers\\AuthServiceProvider"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Move any custom registrations from ",(0,r.jsx)(n.code,{children:"App\\Ship\\Parents\\Providers\\AuthServiceProvider"})," to another service provider and then remove it."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"middlewareserviceprovider",children:"MiddlewareServiceProvider"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Abstracts\\Providers\\MiddlewareServiceProvider"})," class has been removed."]}),"\n",(0,r.jsxs)(n.p,{children:["Migrate your middleware configurations\nto the ",(0,r.jsx)(n.code,{children:"bootstrap/app.php"})," file as per ",(0,r.jsx)(n.a,{href:"https://laravel.com/docs/11.x/middleware#registering-middleware",children:"Laravel\u2019s middleware registration documentation"}),".\nThen, remove your old ",(0,r.jsx)(n.code,{children:"MiddlewareServiceProvider"})," classes."]}),"\n",(0,r.jsxs)(n.p,{children:["Let's\nsay you have customized Laravel's ",(0,r.jsx)(n.code,{children:"Illuminate\\Auth\\Middleware\\RedirectIfAuthenticated"})," middleware\nand registered it in your ",(0,r.jsx)(n.code,{children:"MiddlewareServiceProvider"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"class MiddlewareServiceProvider extends ParentMiddlewareServiceProvider\n{\n    protected array $middlewareAliases = [\n        'guest' => RedirectIfAuthenticated::class,\n    ];\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You can now configure it in ",(0,r.jsx)(n.code,{children:"bootstrap/app.php"})," like this:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"return Application::configure(basePath: $basePath)\n    ...\n    ->withMiddleware(function (Middleware $middleware) {\n        $middleware->api(\n            replace: [\n                'guest' => RedirectIfAuthenticated::class,\n            ]\n        );\n    ...\n    ->create();\n"})}),"\n",(0,r.jsx)(n.h4,{id:"broadcastserviceprovider",children:"BroadcastServiceProvider"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Removed: ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Abstracts\\Providers\\BroadcastServiceProvider"})]}),"\n",(0,r.jsxs)(n.li,{children:["Action:\nRemove your custom ",(0,r.jsx)(n.code,{children:"App\\Ship\\Parents\\Providers\\BroadcastServiceProvider"})," and configure channels in ",(0,r.jsx)(n.code,{children:"bootstrap/app.php"}),"\nas shown ",(0,r.jsx)(n.a,{href:"#app-configuration",children:"above"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"parent-method-calls",children:"Parent Method Calls"}),"\n",(0,r.jsxs)(n.p,{children:["You no longer need to call ",(0,r.jsx)(n.code,{children:"parent::register()"})," or ",(0,r.jsx)(n.code,{children:"parent::boot()"})," in your service providers.\nAll service providers\u2019 ",(0,r.jsx)(n.code,{children:"register"})," and ",(0,r.jsx)(n.code,{children:"boot"})," methods are now invoked independently."]}),"\n",(0,r.jsx)(n.h3,{id:"removed-properties",children:"Removed Properties"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"$serviceProviders"})," and ",(0,r.jsx)(n.code,{children:"$aliases"})," properties have been removed.\nRefactor your service providers to register or alias dependencies within the ",(0,r.jsx)(n.code,{children:"register"})," and ",(0,r.jsx)(n.code,{children:"boot"})," methods."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// before\npublic array $serviceProviders = [\n    ThirdPartyServiceProvider::class,\n];\n\npublic array $aliases = [\n    'something' => ThirdPartyServiceProvider::class,\n];\n\n// after\npublic function register(): void\n{\n    // Reminder: providers under Containers or Ship are autoloaded\n    // and don't need to be registered manually.\n    $this->app->register(ThirdPartyServiceProvider::class);\n    $this->app->alias(ThirdPartyServiceProvider::class, 'something');\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"middleware",children:"Middleware"}),"\n",(0,r.jsx)(n.p,{children:"The following classes have been moved or renamed:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"From"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"To"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Abstracts\\Middlewares"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Middleware"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Abstracts\\Middlewares\\Http\\ProcessETagHeadersMiddleware"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"Apiato\\Http\\Middleware\\ProcessETag"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Abstracts\\Middlewares\\Http\\ValidateJsonContent"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"Apiato\\Http\\Middleware\\ValidateJsonContent"})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Abstracts\\Middlewares\\Http\\ProfilerMiddleware"})," class has been removed."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Middleware\\Http\\Authenticate"})," class has been removed.\nUse ",(0,r.jsx)(n.code,{children:"Illuminate\\Auth\\Middleware\\Authenticate"})," instead."]}),"\n",(0,r.jsxs)(n.p,{children:["Custom middleware like ",(0,r.jsx)(n.code,{children:"ProcessETag"})," and ",(0,r.jsx)(n.code,{children:"ValidateJsonContent"})," must now be registered in the ",(0,r.jsx)(n.code,{children:"bootstrap/app.php"})," file.\nTake a look at the ",(0,r.jsx)(n.a,{href:"#app-configuration",children:"App Configuration"})," section for details."]}),"\n",(0,r.jsx)(n.h2,{id:"resource-key",children:"Resource Key"}),"\n",(0,r.jsxs)(n.p,{children:["If you have custom models that don't extend the ",(0,r.jsx)(n.code,{children:"App\\Ship\\Parents\\Models"})," models,\nyou need to implement the ",(0,r.jsx)(n.code,{children:"Apiato\\Http\\Resources\\ResourceKeyAware"})," interface\nand use the ",(0,r.jsx)(n.code,{children:"Apiato\\Http\\Resources\\HasResourceKey"})," trait.\ne.g., ",(0,r.jsx)(n.code,{children:"App\\Containers\\AppSection\\Authorization\\Models\\Roles"}),"."]}),"\n",(0,r.jsxs)(n.h4,{id:"has-resource-key-interface",children:[(0,r.jsx)(n.code,{children:"HasResourceKey"})," Interface"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Contracts\\HasResourceKey"})," interface has been renamed\nand moved to ",(0,r.jsx)(n.code,{children:"Apiato\\Http\\Resources\\ResourceKeyAware"}),"."]}),"\n",(0,r.jsxs)(n.h4,{id:"has-resource-key-trait",children:[(0,r.jsx)(n.code,{children:"HasResourceKey"})," Trait"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Traits\\HasResourceKeyTrait"})," trait has been renamed\nand moved to ",(0,r.jsx)(n.code,{children:"Apiato\\Http\\Resources\\HasResourceKey"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"modeltrait",children:"ModelTrait"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Abstracts\\Traits\\ModelTrait"})," trait has been renamed\nand moved to ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Models\\InteractsWithApiato"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"value-objects",children:"Value Objects"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Apiato\\Core\\Values\\Value"})," abstract class is now declared as ",(0,r.jsx)(n.code,{children:"readonly"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Add the ",(0,r.jsx)(n.code,{children:"readonly"})," keyword to your parent Value Object class and all Value Objects that extend it."]}),"\n",(0,r.jsx)(n.h2,{id:"models",children:"Models"}),"\n",(0,r.jsxs)(n.p,{children:["Models ",(0,r.jsx)(n.code,{children:"$resourceKey"})," property is no longer used."]}),"\n",(0,r.jsxs)(n.p,{children:["If you were customizing the resource key in your models, you can now do so by overriding the ",(0,r.jsx)(n.code,{children:"getResourceKey"})," method."]}),"\n",(0,r.jsx)(n.h2,{id:"laravel-passport",children:"Laravel Passport"}),"\n",(0,r.jsx)(n.h3,{id:"migration-adjustments",children:"Migration Adjustments"}),"\n",(0,r.jsx)(n.p,{children:"Passport 12.0 no longer loads its own migrations automatically."}),"\n",(0,r.jsxs)(n.p,{children:["Copy Passport migrations from the ",(0,r.jsx)(n.a,{href:"https://github.com/apiato/apiato/tree/13.x/app/Containers/AppSection/Authentication/Data/Migrations",children:"Apiato 13.x branch"})," into your application\n(create the ",(0,r.jsx)(n.code,{children:"Data/Migrations"})," directory if it doesn\u2019t exist)."]}),"\n",(0,r.jsx)(n.h3,{id:"password-grant",children:"Password Grant"}),"\n",(0,r.jsx)(n.p,{children:"As of Passport 12.0, the password grant is disabled by default."}),"\n",(0,r.jsxs)(n.p,{children:["Enable it by calling ",(0,r.jsx)(n.code,{children:"enablePasswordGrant"})," in the ",(0,r.jsx)(n.code,{children:"boot"})," method of one of your service providers:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"public function boot(): void\n{\n    Passport::enablePasswordGrant();\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"deferrable-provider",children:"Deferrable Provider"}),"\n",(0,r.jsxs)(n.p,{children:["Remove the ",(0,r.jsx)(n.code,{children:"Illuminate\\Contracts\\Support\\DeferrableProvider"})," from the service provider that configures Passport."]}),"\n",(0,r.jsx)(n.p,{children:"For example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// before\nuse App\\Ship\\Parents\\Providers\\ServiceProvider as ParentAuthServiceProvider;\nuse Illuminate\\Contracts\\Support\\DeferrableProvider;\nuse Laravel\\Passport\\Passport;\n\nclass AuthServiceProvider extends ParentAuthServiceProvider implements DeferrableProvider\n{\n    public function boot(): void\n    {\n        Passport::enablePasswordGrant();\n    }\n}\n\n// after\nuse App\\Ship\\Parents\\Providers\\ServiceProvider as ParentAuthServiceProvider;\nuse Laravel\\Passport\\Passport;\n\nclass AuthServiceProvider extends ParentAuthServiceProvider\n{\n    public function boot(): void\n    {\n        Passport::enablePasswordGrant();\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"carbon-3",children:"Carbon 3"}),"\n",(0,r.jsxs)(n.p,{children:["In Carbon v3, PHPDoc annotations have been converted to real types. Methods that previously accepted different argument types may now throw a ",(0,r.jsx)(n.code,{children:"TypeError"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["For instance, this example will now throw an error if ",(0,r.jsx)(n.code,{children:"config('apiato.api.expires-in')"})," returns a string:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"Passport::tokensExpireIn(Carbon::now()->addMinutes(config('apiato.api.expires-in')));\n"})}),"\n",(0,r.jsx)(n.p,{children:"To fix it, explicitly cast the string to an integer:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"Passport::tokensExpireIn(Carbon::now()->addMinutes((int)config('apiato.api.expires-in')));\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Review Carbon\u2019s ",(0,r.jsx)(n.a,{href:"https://github.com/briannesbitt/Carbon/releases/tag/3.0.0",children:"release notes"})," and ",(0,r.jsx)(n.a,{href:"https://carbon.nesbot.com/docs/#api-carbon-3",children:"documentation"})," for more details."]})}),"\n",(0,r.jsx)(n.h2,{id:"request",children:"Request"}),"\n",(0,r.jsx)(n.h3,{id:"removed-methods-1",children:"Removed Methods"}),"\n",(0,r.jsx)(n.p,{children:"The following methods have been removed from requests:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"injectData"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"withUrlParameters"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"getAccessArray"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"getDecodeArray"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"getUrlParametersArray"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"hasAccess"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"hasAnyPermissionAccess"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"hasAnyRoleAccess"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"check"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"mapInput"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"getInputByKey"})}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"Gradual Upgrade",type:"tip",children:(0,r.jsxs)(n.p,{children:["For a gradual upgrade in large codebases, refer to the ",(0,r.jsx)(n.a,{href:"#upgrade-utilities",children:"Apiato Legacy Bridge"}),"."]})}),"\n",(0,r.jsx)(n.h3,{id:"authorization",children:"Authorization"}),"\n",(0,r.jsxs)(n.p,{children:["Custom authorization features have been removed and ",(0,r.jsx)(n.code,{children:"$access"})," property is no longer used."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.a,{href:"https://laravel.com/docs/11.x/authorization#creating-policies",children:"Laravel Policies"})," for authorization."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Remove the ",(0,r.jsx)(n.code,{children:"$access"})," property from your request classes."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"hasAccess"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"hasAnyPermissionAccess"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"hasAnyRoleAccess"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"check"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"example-conversion",children:"Example Conversion:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// before\nuse App\\Ship\\Parents\\Requests\\Request as ParentRequest;\n\nfinal class DeleteUserRequest extends ParentRequest\n{\n    protected array $access = [\n        'permissions' => 'delete',\n        'roles' => '',\n    ];\n\n    public function authorize(): bool\n    {\n        return $this->check(['hasAccess']);\n    }\n}\n\n// after\nuse App\\Containers\\AppSection\\User\\Models\\User;\nuse App\\Ship\\Parents\\Requests\\Request as ParentRequest;\n\nfinal class DeleteUserRequest extends ParentRequest\n{\n    public function authorize(): bool\n    {\n        return $this->user()->can('delete', [User::class]);\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"url-parameter-validation",children:"URL Parameter Validation"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"$urlParameters"})," property and the ",(0,r.jsx)(n.code,{children:"getUrlParametersArray"})," method have been removed.\nURL parameters are no longer available for validation in the ",(0,r.jsx)(n.code,{children:"rules"})," method."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Remove the validations that are based on the URL parameters."}),"\n",(0,r.jsxs)(n.li,{children:["Remove any reference to the ",(0,r.jsx)(n.code,{children:"$urlParameters"})," property."]}),"\n",(0,r.jsxs)(n.li,{children:["Remove calls to ",(0,r.jsx)(n.code,{children:"getUrlParametersArray"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"Note that invalid URL parameters now result in a 404 error rather than a 422 error."})}),"\n",(0,r.jsx)(n.h3,{id:"hashed-id-decoding",children:"Hashed ID Decoding"}),"\n",(0,r.jsxs)(n.p,{children:["In addition to the previous behavior, the ",(0,r.jsx)(n.code,{children:"$decode"})," property can now decode route parameters.\nThe catch is that the decoded route parameters will not be available via ",(0,r.jsx)(n.code,{children:"input"})," or ",(0,r.jsx)(n.code,{children:"all"})," methods.\nInstead, you can access them via ",(0,r.jsx)(n.code,{children:"route"})," method."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// endpoint\n/users/{id}\n\nclass DemoRequest extends ParentRequest\n{\n    protected array $decode = ['id'];\n}\n\n$id = $request->route('id');\n"})}),"\n",(0,r.jsx)(n.h3,{id:"input-sanitization",children:"Input Sanitization"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sanitizeInput"})," has been renamed to ",(0,r.jsx)(n.code,{children:"sanitize"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.p,{children:"All Apiato custom error-handling logics has been removed."}),"\n",(0,r.jsx)(n.h3,{id:"removed-methods-on-exceptions",children:"Removed Methods on Exceptions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"debug"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"withErrors"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"getErrors"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exceptionshandler",children:"ExceptionsHandler"}),"\n",(0,r.jsxs)(n.p,{children:["The custom ",(0,r.jsx)(n.code,{children:"App\\Ship\\Exceptions\\Handlers\\ExceptionsHandler"})," is no longer used."]}),"\n",(0,r.jsxs)(n.p,{children:["Remove this class and configure exception handling in ",(0,r.jsx)(n.code,{children:"bootstrap/app.php"})," file."]}),"\n",(0,r.jsx)(n.h3,{id:"http-vs-non-http-exceptions",children:"HTTP vs. Non-HTTP Exceptions"}),"\n",(0,r.jsxs)(n.p,{children:["Exceptions are now divided into two groups: ",(0,r.jsx)(n.strong,{children:"HTTP Exceptions"})," and ",(0,r.jsx)(n.strong,{children:"Non-HTTP Exceptions"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Create a parent HTTP exception class in ",(0,r.jsx)(n.code,{children:"app/Ship/Parents/Exceptions/HttpException.php"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"namespace App\\Ship\\Parents\\Exceptions;\n\nuse Apiato\\Core\\Exceptions\\HttpException as AbstractException;\n\nabstract class HttpException extends AbstractException {}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You now have two parent classes: ",(0,r.jsx)(n.code,{children:"Exception"})," (non-HTTP) and ",(0,r.jsx)(n.code,{children:"HttpException"})," (HTTP)."]}),"\n",(0,r.jsx)(n.p,{children:"Update your custom exceptions:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Extend ",(0,r.jsx)(n.code,{children:"App\\Ship\\Parents\\Exceptions\\HttpException"})," for HTTP errors."]}),"\n",(0,r.jsxs)(n.li,{children:["Extend ",(0,r.jsx)(n.code,{children:"App\\Ship\\Parents\\Exceptions\\Exception"})," for non-HTTP errors."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exception-instantiation",children:"Exception Instantiation"}),"\n",(0,r.jsxs)(n.p,{children:["Exceptions now require mandatory constructor parameters.\nFor example, calling ",(0,r.jsx)(n.code,{children:"new NotFoundHttpException()"})," with no arguments no longer works.\nYou have to pass the ",(0,r.jsx)(n.code,{children:"$message"})," and the ",(0,r.jsx)(n.code,{children:"$code"})," arguments."]}),"\n",(0,r.jsx)(n.p,{children:"Refactor your exception instantiations accordingly."}),"\n",(0,r.jsx)(n.admonition,{title:"Automated Refactoring",type:"tip",children:(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"#rector-rules",children:"Rector Rules"})," for automated refactoring utilities."]})}),"\n",(0,r.jsx)(n.h3,{id:"removed-core-exceptions",children:"Removed Core Exceptions"}),"\n",(0,r.jsxs)(n.p,{children:["All exceptions under the ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Exceptions"})," namespace have been removed."]}),"\n",(0,r.jsx)(n.p,{children:"Remove their usages from your application."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Exceptions\\AuthenticationException"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Exceptions\\GeneratorErrorException"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Exceptions\\IncorrectIdException"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Exceptions\\InvalidTransformerException"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Exceptions\\MissingJSONHeaderException"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Exceptions\\MissingTestEndpointException"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Exceptions\\UndefinedMethodException"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Exceptions\\UnsupportedFractalIncludeException"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Exceptions\\WrongConfigurationsException"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"Apiato\\Core\\Exceptions\\WrongEndpointFormatException"})}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Apiato now returns ",(0,r.jsx)(n.code,{children:"401"})," instead of ",(0,r.jsx)(n.code,{children:"403"})," when a user is unauthenticated (matching Laravel\u2019s default behavior)."]})}),"\n",(0,r.jsx)(n.h2,{id:"response",children:"Response"}),"\n",(0,r.jsx)(n.h3,{id:"transformation",children:"Transformation"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"transform"})," method in API Controllers is removed.\nUse the ",(0,r.jsx)(n.a,{href:"/docs/next/the-basics/response",children:"Response"})," facade instead."]}),"\n",(0,r.jsxs)(n.p,{children:["Update your ",(0,r.jsx)(n.code,{children:"app/Ship/Configs/fractal.php"})," file to use the Apiato Response class"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"'fractal_class' => \\Apiato\\Http\\Response::class\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Replace all ",(0,r.jsx)(n.code,{children:"$this->transform"})," calls with the Response facade."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"// before\nreturn $this->transform($data, Transformer::class);\n\n// after\nreturn Response::create($data, Transformer::class);\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Automate this process using Rector",type:"tip",children:(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"#upgrade-utilities",children:"Upgrade Utilities"})," for automated refactoring utilities."]})}),"\n",(0,r.jsx)(n.h3,{id:"filtering",children:"Filtering"}),"\n",(0,r.jsxs)(n.p,{children:["The approach to filtering responses has changed.\nCheck out its ",(0,r.jsx)(n.a,{href:"/docs/next/the-basics/response#filtering",children:"documentation"})," and update your code accordingly."]}),"\n",(0,r.jsx)(n.h2,{id:"repository",children:"Repository"}),"\n",(0,r.jsx)(n.p,{children:"Some repository methods are strongly typed or behave differently."}),"\n",(0,r.jsxs)(n.h4,{id:"boot-method",children:[(0,r.jsx)(n.code,{children:"boot"})," Method"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"boot"})," now has a ",(0,r.jsx)(n.code,{children:"void"})," return type."]}),"\n",(0,r.jsxs)(n.p,{children:["If you have overridden the ",(0,r.jsx)(n.code,{children:"boot"})," method, adjust your method signature accordingly."]}),"\n",(0,r.jsxs)(n.h4,{id:"getbyid-method",children:[(0,r.jsx)(n.code,{children:"getById"})," Method"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"getById"})," has been renamed to ",(0,r.jsx)(n.code,{children:"findOrFail"}),"."]}),"\n",(0,r.jsxs)(n.h4,{id:"delete-method",children:[(0,r.jsx)(n.code,{children:"delete"})," Method"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"delete"})," method now returns ",(0,r.jsx)(n.code,{children:"bool"})," or throws an exception."]}),"\n",(0,r.jsxs)(n.p,{children:["If you have overridden the ",(0,r.jsx)(n.code,{children:"delete"})," method, adjust your method signature accordingly."]}),"\n",(0,r.jsxs)(n.h4,{id:"create-method",children:[(0,r.jsx)(n.code,{children:"create"})," Method"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"create"})," now throws ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Repositories\\Exceptions\\ResourceCreationFailed"})," instead of ",(0,r.jsx)(n.code,{children:"\\Exception"}),"."]}),"\n",(0,r.jsxs)(n.h4,{id:"update-method",children:[(0,r.jsx)(n.code,{children:"update"})," Method"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"update"})," now throws ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Repositories\\Exceptions\\ResourceNotFound"})," instead of ",(0,r.jsx)(n.code,{children:"\\Illuminate\\Database\\Eloquent\\ModelNotFoundException"}),"."]}),"\n",(0,r.jsxs)(n.h4,{id:"find-method",children:[(0,r.jsx)(n.code,{children:"find"})," Method"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"find"})," now returns ",(0,r.jsx)(n.code,{children:"null"})," if no result is found (mirroring Laravel\u2019s default ",(0,r.jsx)(n.code,{children:"find"})," behavior). Previously, it might have thrown an exception."]}),"\n",(0,r.jsx)(n.admonition,{title:"Maintaining Previous Behavior",type:"info",children:(0,r.jsxs)(n.p,{children:["To maintain the previous behavior of the ",(0,r.jsx)(n.code,{children:"find"}),", ",(0,r.jsx)(n.code,{children:"create"}),", and ",(0,r.jsx)(n.code,{children:"update"})," methods,\nuse the ",(0,r.jsx)(n.a,{href:"#upgrade-utilities",children:"Legacy Bridge"}),"."]})}),"\n",(0,r.jsx)(n.h3,{id:"criteria",children:"Criteria"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Abstracts\\Criterias"})," class has been moved to ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Criteria"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"hash-ids",children:"Hash IDs"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Apiato\\Core\\Traits\\HashIdTrait"})," is removed."]}),"\n",(0,r.jsxs)(n.p,{children:["Previously, you could use ",(0,r.jsx)(n.code,{children:"$this->decode(...)"})," and ",(0,r.jsx)(n.code,{children:"$this->encode(...)"})," methods in the Controller and Request classes\nto decode and encode hash IDs.\nNow, you need to use the ",(0,r.jsx)(n.code,{children:"hashids"})," helper function instead."]}),"\n",(0,r.jsxs)(n.p,{children:["Use the ",(0,r.jsx)(n.code,{children:"hashids()"})," helper function instead."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"$this->decode(...)"})," \u2192 ",(0,r.jsx)(n.code,{children:"hashids()->decode(...)"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"$this->encode(...)"})," \u2192 ",(0,r.jsx)(n.code,{children:"hashids()->encode(...)"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Hashids::decode(...)"})," \u2192 ",(0,r.jsx)(n.code,{children:"hashids()->decode(...)"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Hashids::encode(...)"})," \u2192 ",(0,r.jsx)(n.code,{children:"hashids()->encode(...)"})]}),"\n",(0,r.jsx)(n.li,{children:"etc..."}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"decode"})," method now returns an ",(0,r.jsx)(n.code,{children:"int"})," or an ",(0,r.jsx)(n.code,{children:"array"})," depending on the input.\nPreviously, it always returned an ",(0,r.jsx)(n.code,{children:"array"}),"."]})}),"\n",(0,r.jsx)(n.h2,{id:"jobs",children:"Jobs"}),"\n",(0,r.jsxs)(n.p,{children:["The Core Job class (",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Jobs\\Job"}),") no longer includes any traits or implements interfaces."]}),"\n",(0,r.jsx)(n.p,{children:"Add the necessary traits and interfaces in your Ship\u2019s parent Job class. For example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"namespace App\\Ship\\Parents\\Jobs;\n\nuse Apiato\\Core\\Jobs\\Job as AbstractJob;\nuse Illuminate\\Contracts\\Queue\\ShouldQueue;\nuse Illuminate\\Foundation\\Queue\\Queueable;\nuse Illuminate\\Queue\\InteractsWithQueue;\nuse Illuminate\\Queue\\SerializesModels;\n\nabstract class Job extends AbstractJob implements ShouldQueue\n{\n    use InteractsWithQueue;\n    use Queueable;\n    use SerializesModels;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"validation",children:"Validation"}),"\n",(0,r.jsxs)(n.p,{children:["The custom ",(0,r.jsx)(n.code,{children:"no_spaces"})," validation rule has been removed."]}),"\n",(0,r.jsx)(n.p,{children:"Remove its usage or register it manually in the boot method of your service provider."}),"\n",(0,r.jsxs)(n.p,{children:["See the ",(0,r.jsx)(n.a,{href:"https://github.com/apiato/core/blob/8.x/src/Traits/ValidationTrait.php",children:"source code"})," for reference."]}),"\n",(0,r.jsx)(n.h2,{id:"database-seeding",children:"Database Seeding"}),"\n",(0,r.jsxs)(n.p,{children:["Apiato no longer uses Laravel\u2019s ",(0,r.jsx)(n.code,{children:"database/seeders/DatabaseSeeder.php"}),". Instead, place your seeders in the Ship or any Container\u2019s ",(0,r.jsx)(n.code,{children:"database/seeders"})," directory:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Remove ",(0,r.jsx)(n.code,{children:"database/seeders/DatabaseSeeder.php"})," if present."]}),"\n",(0,r.jsxs)(n.li,{children:["Move your seeding logic into ",(0,r.jsx)(n.code,{children:"Ship"})," or ",(0,r.jsx)(n.code,{children:"Container"})," seeder classes."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"apiato:seed-deploy"})," and ",(0,r.jsx)(n.code,{children:"apiato:seed-test"})," commands have been moved from the ",(0,r.jsx)(n.code,{children:"Core"})," to the ",(0,r.jsx)(n.code,{children:"Apiato"}),".\nSo they will be only available in new Apiato projects."]}),"\n",(0,r.jsx)(n.p,{children:"To use them in your existing project, either:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create your own custom command to seed your database."}),"\n",(0,r.jsxs)(n.li,{children:["Or copy the ",(0,r.jsx)(n.code,{children:"apiato:seed-deploy"})," and ",(0,r.jsx)(n.code,{children:"apiato:seed-test"})," commands from the ",(0,r.jsx)(n.a,{href:"https://github.com/apiato/apiato/tree/13.x/app/Ship/Commands",children:"Apiato 13.x branch"})," into your application.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Remember to also copy the ",(0,r.jsx)(n.code,{children:"app/Ship/Seeders"})," ",(0,r.jsx)(n.a,{href:"https://github.com/apiato/apiato/tree/13.x/app/Ship/Seeders",children:"directory"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"commands",children:"Commands"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Abstracts\\Commands\\ConsoleCommand"})," class has been renamed\nand moved to ",(0,r.jsx)(n.code,{children:"Apiato\\Core\\Console\\Command"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"notifications",children:"Notifications"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"notification.channels"})," configuration has been removed."]}),"\n",(0,r.jsxs)(n.p,{children:["You can no longer add a notification channel to all notifications\nby adding it to the ",(0,r.jsx)(n.code,{children:"notification.channels"})," array in the configuration file."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"abstract class Notification extends LaravelNotification\n{\n    // This method has been removed from the parent class\n    public function via($notifiable): array\n    {\n        return config('notification.channels');\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"If you depend on this feature, you can add the removed method to your parent notification class."}),"\n",(0,r.jsx)(n.h2,{id:"api-url-configuration",children:"API URL Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"path-prefix",children:"Path Prefix"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"apiato.api.prefix"})," configuration option has been removed."]}),"\n",(0,r.jsxs)(n.p,{children:["You can now configure the path prefix\nusing the ",(0,r.jsx)(n.a,{href:"/docs/next/digging-deeper/advance-configuration#routing",children:"Apiato configuration"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"version-prefix",children:"Version Prefix"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"apiato.api.enable_version_prefix"})," configuration option has been removed."]}),"\n",(0,r.jsxs)(n.p,{children:["You can now configure the version prefix\nusing the ",(0,r.jsx)(n.a,{href:"/docs/next/digging-deeper/advance-configuration#routing",children:"Apiato configuration"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"uncamelize-function",children:"Uncamelize Function"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"uncamelize"})," helper function has been removed."]}),"\n",(0,r.jsx)(n.h2,{id:"miscellaneous",children:"Miscellaneous"}),"\n",(0,r.jsxs)(n.p,{children:["We recommend\nreviewing changes in ",(0,r.jsx)(n.a,{href:"https://github.com/apiato/apiato",children:"apiato/apiato"})," and ",(0,r.jsx)(n.a,{href:"https://github.com/apiato/core",children:"apiato/core"})," repositories between versions ",(0,r.jsx)(n.a,{href:"https://github.com/apiato/apiato/compare/12.x...13.x",children:"12.x and 13.x"})," and ",(0,r.jsx)(n.a,{href:"https://github.com/apiato/core/compare/8.x...13.x",children:"8.x and 13.x"})," respectively,\nusing GitHub\u2019s comparison tools.\nNot all changes are mandatory.\nSome involve configuration or comments you may wish to sync."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>a});var r=i(96540);const s={},o=r.createContext(s);function d(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);