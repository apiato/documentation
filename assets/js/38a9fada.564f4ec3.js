"use strict";(self.webpackChunkapiato_documentation=self.webpackChunkapiato_documentation||[]).push([[8314],{5973:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"components/optional-components/repository/criterias","title":"Criterias","description":"To prevent overlap with the L5 Repository documentation, this page","source":"@site/docs/components/optional-components/repository/criterias.md","sourceDirName":"components/optional-components/repository","slug":"/components/optional-components/repository/criterias","permalink":"/docs/next/components/optional-components/repository/criterias","draft":false,"unlisted":false,"editUrl":"https://github.com/apiato/documentation/tree/master/docs/components/optional-components/repository/criterias.md","tags":[{"inline":true,"label":"component","permalink":"/docs/next/tags/component"},{"inline":true,"label":"optional-component","permalink":"/docs/next/tags/optional-component"},{"inline":true,"label":"criteria","permalink":"/docs/next/tags/criteria"},{"inline":true,"label":"repository","permalink":"/docs/next/tags/repository"},{"inline":true,"label":"action","permalink":"/docs/next/tags/action"},{"inline":true,"label":"task","permalink":"/docs/next/tags/task"}],"version":"current","lastUpdatedBy":"Mohammad Alavi","lastUpdatedAt":1697511591000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Criterias","tags":["component","optional-component","criteria","repository","action","task"]},"sidebar":"tutorialSidebar","previous":{"title":"Repositories","permalink":"/docs/next/components/optional-components/repository/repositories"},"next":{"title":"Seeders","permalink":"/docs/next/components/optional-components/seeders"}}');var r=i(74848),o=i(28453);const a={sidebar_position:2,title:"Criterias",tags:["component","optional-component","criteria","repository","action","task"]},s=void 0,l={},c=[{value:"Rules",id:"rules",level:2},{value:"Folder Structure",id:"folder-structure",level:2},{value:"Code Example",id:"code-example",level:2},{value:"Applying Criteria",id:"applying-criteria",level:3}];function p(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["To prevent overlap with the L5 Repository documentation, this page\nexclusively delves into Apiato distinct features and configurations,\noffering only a limited set of examples.\nTo learn more about Criterias and the L5 Repository package,\nplease refer to its ",(0,r.jsx)(n.a,{href:"https://github.com/andersao/l5-repository",children:"documentation"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Criterias are specialized classes designed to encapsulate\nand apply query conditions when fetching data from a database using a ",(0,r.jsx)(n.a,{href:"/docs/next/components/optional-components/repository/repositories",children:"Repository"}),".\nUnlike adding query conditions directly to a Repository or as a scope within a Model,\nCriterias offer distinct advantages."]}),"\n",(0,r.jsx)(n.p,{children:"With Criterias, you can define query conditions in a reusable and shareable way.\nThis means\nthat a single query condition can be defined once and then\nutilized across multiple Models and Repositories in your application.\nThis approach offers the flexibility to create query conditions once\nand apply them consistently anywhere in your application,\nenhancing code reusability and maintainability."}),"\n",(0,r.jsx)(n.h2,{id:"rules",children:"Rules"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["All container-specific Criterias MUST be placed in the ",(0,r.jsx)(n.code,{children:"app/Containers/{Section}/{Container}/Data/Criterias"})," directory."]}),"\n",(0,r.jsxs)(n.li,{children:["All general Criterias MUST be placed in the ",(0,r.jsx)(n.code,{children:"app/Ship/Criterias"})," directory."]}),"\n",(0,r.jsxs)(n.li,{children:["All Criterias MUST extend the ",(0,r.jsx)(n.code,{children:"App\\Ship\\Parents\\Criterias\\Criteria"})," class.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The parent extension SHOULD be aliased as ",(0,r.jsx)(n.code,{children:"ParentCriteria"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Every Criteria MUST have an ",(0,r.jsx)(n.code,{children:"apply"})," method."]}),"\n",(0,r.jsx)(n.li,{children:"A Criteria MUST not contain any extra code. If it needs data, the data MUST be passed to it."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"folder-structure",children:"Folder Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-markdown",children:"app\n\u251c\u2500\u2500 Containers\n\u2502   \u2514\u2500\u2500 Section\n\u2502       \u2514\u2500\u2500 Container\n\u2502           \u2514\u2500\u2500 Data\n\u2502               \u2514\u2500\u2500 Criterias\n\u2502                   \u251c\u2500\u2500 ColourRedCriteria.php\n\u2502                   \u251c\u2500\u2500 RaceCarsCriteria.php\n\u2502                   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 Ship\n    \u2514\u2500\u2500 Criterias\n        \u251c\u2500\u2500 CreatedTodayCriteria.php\n        \u251c\u2500\u2500 NotNullCriteria.php\n        \u2514\u2500\u2500 ...\n"})}),"\n",(0,r.jsx)(n.h2,{id:"code-example",children:"Code Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"use App\\Ship\\Parents\\Criterias\\Criteria as ParentCriteria;\nuse Prettus\\Repository\\Contracts\\RepositoryInterface as PrettusRepositoryInterface;\n\nclass IsNullCriteria extends ParentCriteria\n{\n    public function __construct(\n        private readonly string $field\n    ) {\n    }\n\n    public function apply($model, PrettusRepositoryInterface $repository)\n    {\n        return $model->whereNull($this->field);\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"applying-criteria",children:"Applying Criteria"}),"\n",(0,r.jsxs)(n.p,{children:["A Criteria can be applied to a Repository by using the ",(0,r.jsx)(n.code,{children:"pushCriteria"})," method."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"public function __construct(\n    protected readonly UserRepository $repository\n) {\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"pushCriteria"})," method accepts an instance of a Criteria class or a string with the Criteria class name."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"public function run()\n{\n    $this->repository->pushCriteria(new IsNullCriteria('email'));\n    return $this->repository->paginate();\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You can also apply multiple Criterias to a Repository by using the ",(0,r.jsx)(n.code,{children:"pushCriteria"})," method multiple times."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"public function run()\n{\n    $this->repository->pushCriteria(new IsNullCriteria('email'));\n    $this->repository->pushCriteria(OrderByNameCriteria::class);\n    return $this->repository->paginate();\n}\n"})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>s});var t=i(96540);const r={},o=t.createContext(r);function a(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);