"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2534],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return d}});var i=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=i.createContext({}),s=function(e){var n=i.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},p=function(e){var n=s(e.components);return i.createElement(c.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},f=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),f=s(t),d=a,m=f["".concat(c,".").concat(d)]||f[d]||u[d]||o;return t?i.createElement(m,r(r({ref:n},p),{},{components:t})):i.createElement(m,r({ref:n},p))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,r=new Array(o);r[0]=f;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var s=2;s<o;s++)r[s]=t[s];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}f.displayName="MDXCreateElement"},3801:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return p},default:function(){return f}});var i=t(7462),a=t(3366),o=(t(7294),t(3905)),r=["components"],l={title:"Notifications"},c=void 0,s={unversionedId:"optional-components/notifications",id:"optional-components/notifications",isDocsHomePage:!1,title:"Notifications",description:"* Definition",source:"@site/docs/optional-components/notifications.md",sourceDirName:"optional-components",slug:"/optional-components/notifications",permalink:"/docs/next/optional-components/notifications",editUrl:"https://github.com/apiato/documentation/tree/master/docs/optional-components/notifications.md",tags:[],version:"current",lastUpdatedBy:"Mohammad Alavi",lastUpdatedAt:1618741258,formattedLastUpdatedAt:"4/18/2021",frontMatter:{title:"Notifications"},sidebar:"docs",previous:{title:"Mails",permalink:"/docs/next/optional-components/mails"},next:{title:"Values",permalink:"/docs/next/optional-components/values"}},p=[{value:"Definition",id:"definition",children:[]},{value:"Principles",id:"principles",children:[{value:"Rules",id:"rules",children:[]},{value:"Folder Structure",id:"folder-structure",children:[]},{value:"Code Samples",id:"code-samples",children:[]}]},{value:"Select Channels",id:"select-channels",children:[]},{value:"Queueing a Notification",id:"queueing",children:[]},{value:"Use DB channel",id:"db-channel",children:[]}],u={toc:p};function f(e){var n=e.components,t=(0,a.Z)(e,r);return(0,o.kt)("wrapper",(0,i.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#definition"},"Definition")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#principles"},"Principles")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#rules"},"Rules")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#folder-structure"},"Folder Structure")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#code-samples"},"Code Samples")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#select-channels"},"Select Channels")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#queueing"},"Queueing")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#db-channel"},"Use DB channel"))),(0,o.kt)("h3",{id:"definition"},"Definition"),(0,o.kt)("p",null,"Notifications allow you to inform the user about a state changes in your application.  "),(0,o.kt)("p",null,"The Laravel notifications supports sending notifications across a variety of channels (mail, SMS, Slack, Database...). "),(0,o.kt)("p",null,"When using the Database channel, the notifications will be stored in a database to be displayed in your client interface."),(0,o.kt)("h2",{id:"principles"},"Principles"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Containers MAY or MAY NOT have one or more Notification.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Ship MAY contain Application general Notifications."))),(0,o.kt)("h3",{id:"rules"},"Rules"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"All Notifications MUST extend from ",(0,o.kt)("inlineCode",{parentName:"li"},"App\\Ship\\Parents\\Notifications\\Notification"),".")),(0,o.kt)("h3",{id:"folder-structure"},"Folder Structure"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"- app\n  - Containers\n    - {select-name}\n      - {container-name}\n        - Notifications\n          - UserRegisteredNotification.php\n          - ...\n  - Ship\n    - Notifications\n      - SystemFailureNotification.php\n      - ...\n")),(0,o.kt)("h3",{id:"code-samples"},"Code Samples"),(0,o.kt)("h4",{id:"a-simple-notification"},"A Simple Notification"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},'class BirthdayReminderNotification extends Notification implements ShouldQueue\n{\n    use Queueable;\n\n    protected $notificationMessage;\n\n    public function __construct($notificationMessage)\n    {\n        $this->notificationMessage = $notificationMessage;\n    }\n    \n    public function toArray($notifiable)\n    {\n        return [\n            \'content\' => $this->notificationMessage,\n        ];\n    }\n\n    public function toMail($notifiable)\n    {\n        // $notifiable is the object you want to notify "e.g. user"\n        return (new MailMessage)\n            ->subject("Hello World")\n            ->line("Hi, $notifiable->name")\n            ->line($this->notificationMessage);\n    }\n\n    public function toSms($notifiable)\n    {\n        // ...\n    }\n    \n    // ...\n}\n')),(0,o.kt)("h4",{id:"usage-from-an-action-or-task"},"Usage from an Action or Task"),(0,o.kt)("p",null,"Notifications can be sent from Actions or Tasks using the ",(0,o.kt)("inlineCode",{parentName:"p"},"Notification")," Facade.  "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"\\Notification::send($user, new BirthdayReminderNotification($notificationMessage));\n")),(0,o.kt)("p",null,"Alternatively you can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"Illuminate\\Notifications\\Notifiable"),' trait on the notifiable object "e.g. User" and then call it as follows:'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"// call notify, found on the Notifiable trait\n$user->notify(new BirthdayReminderNotification($notificationMessage));\n")),(0,o.kt)("h2",{id:"select-channels"},"Select Channels"),(0,o.kt)("p",null,"To select a notification channel, apiato have the ",(0,o.kt)("inlineCode",{parentName:"p"},"app/Ship/Configs/notification.php"),' config file where you can define the array of supported channels "e.g. SMS, Email, WebPush...", to be used for all your notifications.'),(0,o.kt)("p",null,"If you want to override the configuration for some notifications classes, or if you prefer to define the channels within each notification class itself,\nyou can override the ",(0,o.kt)("inlineCode",{parentName:"p"},"via")," function ",(0,o.kt)("inlineCode",{parentName:"p"},"public function via($notifiable)")," in the notification class and define your channels. "),(0,o.kt)("p",null,"Checkout ",(0,o.kt)("a",{parentName:"p",href:"http://laravel-notification-channels.com"},"laravel notification channels")," for list of supported integrations."),(0,o.kt)("h2",{id:"queueing"},"Queueing a Notification"),(0,o.kt)("p",null,"To queue a notification you should use ",(0,o.kt)("inlineCode",{parentName:"p"},"Illuminate\\Bus\\Queueable")," and implement ",(0,o.kt)("inlineCode",{parentName:"p"},"Illuminate\\Contracts\\Queue\\ShouldQueue"),"."),(0,o.kt)("h2",{id:"db-channel"},"Use DB channel"),(0,o.kt)("p",null,"Generally you need to generate the notification migration ",(0,o.kt)("inlineCode",{parentName:"p"},"php artisan notifications:table"),", then run ",(0,o.kt)("inlineCode",{parentName:"p"},"php artisan migrate"),",\nhowever just running the migration command will do the job, since Apiato already adds the ",(0,o.kt)("inlineCode",{parentName:"p"},"_create_notifications_table.php")," in the default migrations files directory ",(0,o.kt)("inlineCode",{parentName:"p"},"app/Ship/Migrations/"),"."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Further reading")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"More info at ",(0,o.kt)("a",{parentName:"p",href:"https://laravel.com/docs/notifications"},"Laravel Docs"),"."))))}f.isMDXComponent=!0}}]);